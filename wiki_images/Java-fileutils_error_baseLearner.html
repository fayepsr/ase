<!DOCTYPE html>
        <html>
        <style>
        .GENERAL {
            color: black;
            font-weight: normal;
            font-style: normal;
        }
        .KEYWORD {
            color: blue;
            font-weight: bold;
            font-style: normal;
        }
        .LITERAL {
            color: lightskyblue;
            font-weight: bold;
            font-style: normal;
        }
        .CHAR_STRING_LITERAL {
            color: darkgoldenrod;
            font-weight: normal;
            font-style: normal;
        }
        .COMMENT {
            color: grey;
            font-weight: normal;
            font-style: italic;
        }
        .CLASS_DECLARATOR {
            color: crimson;
            font-weight: bold;
            font-style: normal;
        }
        .FUNCTION_DECLARATOR {
            color: fuchsia;
            font-weight: bold;
            font-style: normal;
        }
        .VARIABLE_DECLARATOR {
            color: purple;
            font-weight: bold;
            font-style: normal;
        }
        .TYPE_IDENTIFIER {
            color: darkgreen;
            font-weight: bold;
            font-style: normal;
        }
        .FUNCTION_IDENTIFIER {
            color: dodgerblue;
            font-weight: normal;
            font-style: normal;
        }
        .FIELD_IDENTIFIER {
            color: coral;
            font-weight: normal;
            font-style: normal;
        }
        .ANNOTATION_DECLARATOR {
            color: lightslategray;
            font-weight: lighter;
            font-style: italic;
        }
        </style><pre><code class="COMMENT">/*<br />
&nbsp;*&nbsp;Copyright&nbsp;2018&nbsp;The&nbsp;StartupOS&nbsp;Authors.<br />
&nbsp;*<br />
&nbsp;*&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;License,&nbsp;Version&nbsp;2.0&nbsp;(the&nbsp;"License");<br />
&nbsp;*&nbsp;you&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the&nbsp;License.<br />
&nbsp;*&nbsp;You&nbsp;may&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at<br />
&nbsp;*<br />
&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;https://www.apache.org/licenses/LICENSE-2.0<br />
&nbsp;*<br />
&nbsp;*&nbsp;Unless&nbsp;required&nbsp;by&nbsp;applicable&nbsp;law&nbsp;or&nbsp;agreed&nbsp;to&nbsp;in&nbsp;writing,&nbsp;software<br />
&nbsp;*&nbsp;distributed&nbsp;under&nbsp;the&nbsp;License&nbsp;is&nbsp;distributed&nbsp;on&nbsp;an&nbsp;"AS&nbsp;IS"&nbsp;BASIS,<br />
&nbsp;*&nbsp;WITHOUT&nbsp;WARRANTIES&nbsp;OR&nbsp;CONDITIONS&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;either&nbsp;express&nbsp;or&nbsp;implied.<br />
&nbsp;*&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permissions&nbsp;and<br />
&nbsp;*&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br />
&nbsp;*/</code><br />
<br />
<code class="KEYWORD">package</code>&nbsp;<code class="GENERAL">com</code><code class="GENERAL">.</code><code class="GENERAL">google</code><code class="GENERAL">.</code><code class="GENERAL">startupos</code><code class="GENERAL">.</code><code class="ANNOTATION_DECLARATOR">common</code><code class="GENERAL">;</code><br />
<br />
<code class="KEYWORD">import</code>&nbsp;<code class="KEYWORD">static</code>&nbsp;<code class="TYPE_IDENTIFIER">java</code><code class="GENERAL">.</code><code class="TYPE_IDENTIFIER">nio</code><code class="GENERAL">.</code><code class="GENERAL">charset</code><code class="GENERAL">.</code><code class="GENERAL">StandardCharsets</code><code class="GENERAL">.</code><code class="GENERAL">UTF_8</code><code class="GENERAL">;</code><br />
<br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">com</code><code class="GENERAL">.</code><code class="GENERAL">google</code><code class="GENERAL">.</code><code class="GENERAL">common</code><code class="GENERAL">.</code><code class="GENERAL">collect</code><code class="GENERAL">.</code><code class="GENERAL">ImmutableList</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">com</code><code class="GENERAL">.</code><code class="GENERAL">google</code><code class="GENERAL">.</code><code class="GENERAL">common</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">CharStreams</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">com</code><code class="GENERAL">.</code><code class="GENERAL">google</code><code class="GENERAL">.</code><code class="GENERAL">common</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">Resources</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">com</code><code class="GENERAL">.</code><code class="GENERAL">google</code><code class="GENERAL">.</code><code class="GENERAL">protobuf</code><code class="GENERAL">.</code><code class="GENERAL">Message</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">com</code><code class="GENERAL">.</code><code class="GENERAL">google</code><code class="GENERAL">.</code><code class="GENERAL">protobuf</code><code class="GENERAL">.</code><code class="GENERAL">TextFormat</code><code class="GENERAL">;</code><br />
<br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">BufferedReader</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">BufferedWriter</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">File</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">FileWriter</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">IOException</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">InputStream</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">io</code><code class="GENERAL">.</code><code class="GENERAL">InputStreamReader</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">net</code><code class="GENERAL">.</code><code class="GENERAL">MalformedURLException</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">net</code><code class="GENERAL">.</code><code class="GENERAL">URI</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">net</code><code class="GENERAL">.</code><code class="GENERAL">URL</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">FileSystem</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">FileSystems</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">FileVisitResult</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">Files</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">Path</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">SimpleFileVisitor</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">StandardCopyOption</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">nio</code><code class="GENERAL">.</code><code class="GENERAL">file</code><code class="GENERAL">.</code><code class="GENERAL">attribute</code><code class="GENERAL">.</code><code class="GENERAL">BasicFileAttributes</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">util</code><code class="GENERAL">.</code><code class="GENERAL">HashMap</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">util</code><code class="GENERAL">.</code><code class="GENERAL">Map</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">util</code><code class="GENERAL">.</code><code class="GENERAL">regex</code><code class="GENERAL">.</code><code class="GENERAL">Pattern</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">util</code><code class="GENERAL">.</code><code class="GENERAL">stream</code><code class="GENERAL">.</code><code class="GENERAL">Collectors</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">util</code><code class="GENERAL">.</code><code class="GENERAL">stream</code><code class="GENERAL">.</code><code class="GENERAL">Stream</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">java</code><code class="GENERAL">.</code><code class="GENERAL">util</code><code class="GENERAL">.</code><code class="GENERAL">zip</code><code class="GENERAL">.</code><code class="GENERAL">ZipFile</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">javax</code><code class="GENERAL">.</code><code class="GENERAL">inject</code><code class="GENERAL">.</code><code class="GENERAL">Inject</code><code class="GENERAL">;</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">javax</code><code class="GENERAL">.</code><code class="GENERAL">inject</code><code class="GENERAL">.</code><code class="ANNOTATION_DECLARATOR">Named</code><br />
<code class="KEYWORD">import</code>&nbsp;<code class="GENERAL">javax</code><code class="GENERAL">.</code><code class="GENERAL">inject</code><code class="GENERAL">.</code><code class="ANNOTATION_DECLARATOR">Singleton</code><code class="GENERAL">;</code><br />
<br />
<code class="COMMENT">/**&nbsp;File&nbsp;utils.&nbsp;*/</code><br />
<code class="COMMENT">//&nbsp;TODO&nbsp;Disallow&nbsp;`java.nio.file.Paths`&nbsp;using&nbsp;error_prone,&nbsp;since&nbsp;it&nbsp;bypasses&nbsp;the&nbsp;injected&nbsp;FileSystem.</code><br />
<code class="ANNOTATION_DECLARATOR">@</code><code class="ANNOTATION_DECLARATOR">Singleton</code><br />
<code class="GENERAL">public</code>&nbsp;<code class="KEYWORD">class</code>&nbsp;<code class="CLASS_DECLARATOR">FileUtils</code>&nbsp;<code class="GENERAL">{</code><br />
&nbsp;&nbsp;<code class="KEYWORD">private</code>&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">userHome</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">private</code>&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">FileSystem</code>&nbsp;<code class="CLASS_DECLARATOR">fileSystem</code><code class="LITERAL">;</code><code class="KEYWORD">;</code><br />
<br />
&nbsp;&nbsp;<code class="ANNOTATION_DECLARATOR">@</code><code class="TYPE_IDENTIFIER">Inject</code><br />
&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">FileUtils</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">FileSystem</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="TYPE_IDENTIFIER">,</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">@</code><code class="CLASS_DECLARATOR">Named</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">"Home&nbsp;folder"</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">userHome</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">this</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">fileSystem</code>&nbsp;<code class="TYPE_IDENTIFIER">=</code>&nbsp;<code class="CLASS_DECLARATOR">fileSystem</code><code class="TYPE_IDENTIFIER">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">this</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">userHome</code>&nbsp;<code class="TYPE_IDENTIFIER">=</code>&nbsp;<code class="CLASS_DECLARATOR">userHome</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Replace&nbsp;the&nbsp;~&nbsp;in&nbsp;e.g&nbsp;~/path&nbsp;with&nbsp;the&nbsp;home&nbsp;directory.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">startsWith</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">"~"</code>&nbsp;<code class="TYPE_IDENTIFIER">+</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getSeparator</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="VARIABLE_DECLARATOR">path</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="CLASS_DECLARATOR">userHome</code>&nbsp;<code class="GENERAL">+</code>&nbsp;<code class="TYPE_IDENTIFIER">path</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">substring</code><code class="FUNCTION_IDENTIFIER">(</code><code class="LITERAL">1</code><code class="KEYWORD">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;prototxt&nbsp;file&nbsp;into&nbsp;a&nbsp;proto.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxt</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="VARIABLE_DECLARATOR">builder</code><code class="FUNCTION_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="VARIABLE_DECLARATOR">protoText</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="FUNCTION_DECLARATOR">readFile</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">TextFormat</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">merge</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">protoText</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="VARIABLE_DECLARATOR">)</code><code class="COMMENT">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">builder</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">build</code><code class="FUNCTION_DECLARATOR">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;prototxt&nbsp;from&nbsp;a&nbsp;string&nbsp;into&nbsp;a&nbsp;proto.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxtFromString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">prototxt</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">TextFormat</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">merge</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">prototxt</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="VARIABLE_DECLARATOR">)</code><code class="COMMENT">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">builder</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">build</code><code class="FUNCTION_DECLARATOR">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;prototxt&nbsp;file&nbsp;into&nbsp;a&nbsp;proto,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxtUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxt</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;proto&nbsp;to&nbsp;file.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writePrototxt</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="CLASS_DECLARATOR">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="VARIABLE_DECLARATOR">fileContent</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">TextFormat</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">printToUnicodeString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">proto</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">writeString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">fileContent</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;proto&nbsp;to&nbsp;file,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writePrototxtUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="CLASS_DECLARATOR">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">writePrototxt</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;string&nbsp;to&nbsp;file.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writeString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">text</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">File</code>&nbsp;<code class="VARIABLE_DECLARATOR">file</code>&nbsp;<code class="FUNCTION_DECLARATOR">=</code>&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">File</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getParent</code><code class="FUNCTION_DECLARATOR">(</code><code class="CHAR_STRING_LITERAL">)</code>&nbsp;<code class="TYPE_IDENTIFIER">!=</code>&nbsp;<code class="CLASS_DECLARATOR">null</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">mkdirs</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getParent</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">write</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">text</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getBytes</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">UTF_8</code><code class="FUNCTION_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;string&nbsp;to&nbsp;file,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writeStringUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">text</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">writeString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">text</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Checks&nbsp;if&nbsp;file&nbsp;exists.&nbsp;Returns&nbsp;false&nbsp;for&nbsp;folders.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="KEYWORD">boolean</code>&nbsp;<code class="FUNCTION_DECLARATOR">fileExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">isRegularFile</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Checks&nbsp;if&nbsp;folder&nbsp;exists.&nbsp;Returns&nbsp;false&nbsp;for&nbsp;files.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="KEYWORD">boolean</code>&nbsp;<code class="FUNCTION_DECLARATOR">folderExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">isDirectory</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Checks&nbsp;if&nbsp;folder&nbsp;or&nbsp;folder&nbsp;exists.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="KEYWORD">boolean</code>&nbsp;<code class="FUNCTION_DECLARATOR">fileOrFolderExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">isRegularFile</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="GENERAL">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">||</code>&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">isDirectory</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Checks&nbsp;if&nbsp;folder&nbsp;is&nbsp;empty&nbsp;or&nbsp;doesn't&nbsp;exist.&nbsp;Returns&nbsp;false&nbsp;for&nbsp;files.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="KEYWORD">boolean</code>&nbsp;<code class="FUNCTION_DECLARATOR">folderEmptyOrNotExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">fileExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="COMMENT">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FIELD_IDENTIFIER">return</code>&nbsp;<code class="LITERAL">false</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">if</code>&nbsp;<code class="FUNCTION_IDENTIFIER">(</code><code class="TYPE_IDENTIFIER">!</code><code class="FUNCTION_DECLARATOR">folderExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="COMMENT">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FIELD_IDENTIFIER">return</code>&nbsp;<code class="LITERAL">true</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="FUNCTION_DECLARATOR">listContents</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">isEmpty</code><code class="FUNCTION_DECLARATOR">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Creates&nbsp;directories&nbsp;in&nbsp;path&nbsp;if&nbsp;none&nbsp;exist.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">mkdirs</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">createDirectories</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Joins&nbsp;to&nbsp;an&nbsp;absolute&nbsp;paths.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">joinToAbsolutePath</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">first</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">...</code>&nbsp;<code class="TYPE_IDENTIFIER">more</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">first</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">more</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toAbsolutePath</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="TYPE_IDENTIFIER">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Joins&nbsp;paths.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">joinPaths</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">first</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">...</code>&nbsp;<code class="TYPE_IDENTIFIER">more</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">first</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">more</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Get&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">getCurrentWorkingDirectory</code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">System</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getenv</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">"BUILD_WORKSPACE_DIRECTORY"</code><code class="VARIABLE_DECLARATOR">)</code>&nbsp;<code class="TYPE_IDENTIFIER">!=</code>&nbsp;<code class="CLASS_DECLARATOR">null</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">System</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getenv</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">"BUILD_WORKSPACE_DIRECTORY"</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code>&nbsp;<code class="TYPE_IDENTIFIER">else</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">""</code><code class="TYPE_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">.</code><code class="FUNCTION_DECLARATOR">toAbsolutePath</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="TYPE_IDENTIFIER">.</code><code class="CLASS_DECLARATOR">toString</code><code class="FUNCTION_IDENTIFIER">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Get&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.&nbsp;*/</code><code class="COMMENT">/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">getCurrentWorkingDirectoryName</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code>&nbsp;<code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">""</code><code class="TYPE_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">.</code><code class="FUNCTION_DECLARATOR">toAbsolutePath</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getFileName</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="TYPE_IDENTIFIER">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Gets&nbsp;file&nbsp;and&nbsp;folder&nbsp;names&nbsp;in&nbsp;path.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">ImmutableList</code><code class="KEYWORD"><</code><code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="FUNCTION_DECLARATOR">listContents</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Stream</code><code class="KEYWORD"><</code><code class="TYPE_IDENTIFIER">Path</code><code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="VARIABLE_DECLARATOR">paths</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="KEYWORD">.</code><code class="FUNCTION_DECLARATOR">list</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">ImmutableList</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">sortedCopyOf</code><code class="GENERAL">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">paths</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">map</code><code class="GENERAL">(</code><code class="VARIABLE_DECLARATOR">absolutePath</code>&nbsp;<code class="GENERAL">-></code>&nbsp;<code class="TYPE_IDENTIFIER">absolutePath</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getFileName</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">collect</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Collectors</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toList</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Gets&nbsp;subfolder&nbsp;names&nbsp;in&nbsp;path.&nbsp;Throws&nbsp;IllegalStateException&nbsp;if&nbsp;path&nbsp;is&nbsp;not&nbsp;a&nbsp;folder.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">ImmutableList</code><code class="KEYWORD"><</code><code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="FUNCTION_DECLARATOR">listSubfolders</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">!</code><code class="FUNCTION_DECLARATOR">folderExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="CHAR_STRING_LITERAL">)</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">IllegalStateException</code><code class="KEYWORD">(</code><code class="CHAR_STRING_LITERAL">"Folder&nbsp;does&nbsp;not&nbsp;exist"</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">ImmutableList</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">sortedCopyOf</code><code class="KEYWORD">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">listContents</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="GENERAL">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">.</code><code class="FUNCTION_DECLARATOR">stream</code><code class="GENERAL">(</code><code class="GENERAL">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">filter</code><code class="KEYWORD">(</code><code class="VARIABLE_DECLARATOR">x</code>&nbsp;<code class="KEYWORD">-</code>&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="FUNCTION_DECLARATOR">folderExists</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">joinPaths</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">x</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">collect</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Collectors</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toList</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**<br />
&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;file&nbsp;and&nbsp;folder&nbsp;absolute&nbsp;paths&nbsp;recursively.&nbsp;Throws&nbsp;NoSuchFileException&nbsp;if&nbsp;directory<br />
&nbsp;&nbsp;&nbsp;*&nbsp;doesn't&nbsp;exist.<br />
&nbsp;&nbsp;&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">ImmutableList</code><code class="KEYWORD"><</code><code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="FUNCTION_DECLARATOR">listContentsRecursively</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Stream</code><code class="KEYWORD"><</code><code class="TYPE_IDENTIFIER">Path</code><code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="VARIABLE_DECLARATOR">paths</code>&nbsp;<code class="KEYWORD">=</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">find</code><code class="GENERAL">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">,</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="LITERAL">100000</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="COMMENT">//&nbsp;Folder&nbsp;depth</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">unused</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">unused2</code><code class="VARIABLE_DECLARATOR">)</code>&nbsp;<code class="TYPE_IDENTIFIER">-></code>&nbsp;<code class="CLASS_DECLARATOR">true</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">ImmutableList</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">sortedCopyOf</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">paths</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">map</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Path</code><code class="TYPE_IDENTIFIER">::</code><code class="TYPE_IDENTIFIER">toString</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">collect</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Collectors</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toList</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;text&nbsp;file.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">readFile</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">String</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">readAllBytes</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">UTF_8</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;text&nbsp;file,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">readFileUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="FUNCTION_DECLARATOR">readFile</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;text&nbsp;file,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">readFileFromResourcesUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">Resources</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Resources</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getResource</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="FUNCTION_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">UTF_8</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;proto&nbsp;to&nbsp;binary&nbsp;file.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writeProtoBinary</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="CLASS_DECLARATOR">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">File</code>&nbsp;<code class="VARIABLE_DECLARATOR">file</code>&nbsp;<code class="FUNCTION_DECLARATOR">=</code>&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">File</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getParent</code><code class="FUNCTION_DECLARATOR">(</code><code class="CHAR_STRING_LITERAL">)</code>&nbsp;<code class="TYPE_IDENTIFIER">!=</code>&nbsp;<code class="CLASS_DECLARATOR">null</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">mkdirs</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getParent</code><code class="GENERAL">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">proto</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">writeTo</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">newOutputStream</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;proto&nbsp;to&nbsp;binary&nbsp;file,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writeProtoBinaryUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="CLASS_DECLARATOR">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">writeProtoBinary</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;proto&nbsp;binary&nbsp;file&nbsp;into&nbsp;a&nbsp;proto.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readProtoBinary</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">InputStream</code>&nbsp;<code class="VARIABLE_DECLARATOR">input</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">newInputStream</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="FIELD_IDENTIFIER">)</code><code class="COMMENT">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">builder</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">build</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getParserForType</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">parseFrom</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">input</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;proto&nbsp;binary&nbsp;file&nbsp;into&nbsp;a&nbsp;proto,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readProtoBinaryUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="FUNCTION_DECLARATOR">readProtoBinary</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**<br />
&nbsp;&nbsp;&nbsp;*&nbsp;Copies&nbsp;a&nbsp;directory&nbsp;to&nbsp;another&nbsp;directory.&nbsp;Creates&nbsp;target&nbsp;directory&nbsp;if&nbsp;needed&nbsp;and&nbsp;doesn't&nbsp;copy<br />
&nbsp;&nbsp;&nbsp;*&nbsp;symlinks.<br />
&nbsp;&nbsp;&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">copyDirectoryToDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">source</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">destination</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">...</code>&nbsp;<code class="CLASS_DECLARATOR">ignored</code><code class="CHAR_STRING_LITERAL">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="VARIABLE_DECLARATOR">sourcePath</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">source</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="VARIABLE_DECLARATOR">targetPath</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">destination</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">walkFileTree</code><code class="KEYWORD">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">sourcePath</code><code class="TYPE_IDENTIFIER">,</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="TYPE_IDENTIFIER">SimpleFileVisitor</code><code class="TYPE_IDENTIFIER"><</code><code class="TYPE_IDENTIFIER">Path</code><code class="FUNCTION_DECLARATOR">></code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">@</code><code class="CLASS_DECLARATOR">Override</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code>&nbsp;<code class="FUNCTION_DECLARATOR">preVisitDirectory</code><code class="KEYWORD">(</code><code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="CLASS_DECLARATOR">dir</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">BasicFileAttributes</code>&nbsp;<code class="CLASS_DECLARATOR">attrs</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="VARIABLE_DECLARATOR">dirPath</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">dir</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toAbsolutePath</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="TYPE_IDENTIFIER">.</code><code class="CLASS_DECLARATOR">toString</code><code class="FUNCTION_IDENTIFIER">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">ignored</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">length</code>&nbsp;<code class="TYPE_IDENTIFIER">!=</code>&nbsp;<code class="LITERAL">0</code><code class="CLASS_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">for</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">item</code>&nbsp;<code class="KEYWORD">:</code>&nbsp;<code class="CLASS_DECLARATOR">ignored</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">dirPath</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">contains</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">item</code><code class="VARIABLE_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">SKIP_SUBTREE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Pattern</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">matches</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">item</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">dir</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getFileName</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">SKIP_SUBTREE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">createDirectories</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">targetPath</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">resolve</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">sourcePath</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">relativize</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">dir</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="FIELD_IDENTIFIER">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">CONTINUE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">@</code><code class="CLASS_DECLARATOR">Override</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code>&nbsp;<code class="FUNCTION_DECLARATOR">visitFile</code><code class="KEYWORD">(</code><code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="CLASS_DECLARATOR">file</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">BasicFileAttributes</code>&nbsp;<code class="CLASS_DECLARATOR">attrs</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">ignored</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">length</code>&nbsp;<code class="TYPE_IDENTIFIER">!=</code>&nbsp;<code class="LITERAL">0</code><code class="CLASS_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">for</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">itemForIgnore</code>&nbsp;<code class="KEYWORD">:</code>&nbsp;<code class="CLASS_DECLARATOR">ignored</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Pattern</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">matches</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">itemForIgnore</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">file</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getFileName</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">CONTINUE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">isSymbolicLink</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="VARIABLE_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">CONTINUE</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="GENERAL">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">copy</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">targetPath</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">resolve</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">sourcePath</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">relativize</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="FIELD_IDENTIFIER">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">CONTINUE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">copyDirectoryToDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">source</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">destination</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">copyDirectoryToDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">source</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">destination</code><code class="COMMENT">,</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code><code class="LITERAL">[</code><code class="LITERAL">0</code><code class="COMMENT">]</code><code class="KEYWORD">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Deletes&nbsp;all&nbsp;files&nbsp;and&nbsp;folders&nbsp;in&nbsp;directory.&nbsp;Target&nbsp;directory&nbsp;is&nbsp;deleted.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">deleteDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">deleteDirectoryContents</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">true</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**<br />
&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;all&nbsp;files&nbsp;and&nbsp;folders&nbsp;in&nbsp;directory.&nbsp;Target&nbsp;directory&nbsp;is&nbsp;deleted.&nbsp;Rethrows&nbsp;exceptions&nbsp;as<br />
&nbsp;&nbsp;&nbsp;*&nbsp;unchecked.<br />
&nbsp;&nbsp;&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">deleteDirectoryUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">deleteDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Deletes&nbsp;file&nbsp;or&nbsp;folder.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">deleteFileOrDirectoryIfExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">deleteIfExists</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Deletes&nbsp;file&nbsp;or&nbsp;folder,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">deleteFileOrDirectoryIfExistsUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">deleteFileOrDirectoryIfExists</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Deletes&nbsp;all&nbsp;files&nbsp;and&nbsp;folders&nbsp;inside&nbsp;directory.&nbsp;Target&nbsp;directory&nbsp;is&nbsp;not&nbsp;deleted.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">clearDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">deleteDirectoryContents</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">false</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**<br />
&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;all&nbsp;files&nbsp;and&nbsp;folders&nbsp;inside&nbsp;directory.&nbsp;Target&nbsp;directory&nbsp;is&nbsp;not&nbsp;deleted.&nbsp;Rethrows<br />
&nbsp;&nbsp;&nbsp;*&nbsp;exceptions&nbsp;as&nbsp;unchecked.<br />
&nbsp;&nbsp;&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">clearDirectoryUnchecked</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_DECLARATOR">clearDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="COMMENT">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">private</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">deleteDirectoryContents</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="KEYWORD">boolean</code>&nbsp;<code class="CLASS_DECLARATOR">deleteTargetDirectory</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">final</code>&nbsp;<code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="VARIABLE_DECLARATOR">targetDirectory</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="VARIABLE_DECLARATOR">)</code><code class="GENERAL">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">walkFileTree</code><code class="KEYWORD">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">targetDirectory</code><code class="TYPE_IDENTIFIER">,</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="TYPE_IDENTIFIER">SimpleFileVisitor</code><code class="TYPE_IDENTIFIER"><</code><code class="TYPE_IDENTIFIER">Path</code><code class="FUNCTION_DECLARATOR">></code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">@</code><code class="CLASS_DECLARATOR">Override</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code>&nbsp;<code class="FUNCTION_DECLARATOR">visitFile</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="CLASS_DECLARATOR">file</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">BasicFileAttributes</code>&nbsp;<code class="CLASS_DECLARATOR">attrs</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">delete</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">file</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">CONTINUE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">@</code><code class="CLASS_DECLARATOR">Override</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code>&nbsp;<code class="FUNCTION_DECLARATOR">postVisitDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Path</code>&nbsp;<code class="CLASS_DECLARATOR">dir</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">exception</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">if</code>&nbsp;<code class="KEYWORD">(</code><code class="VARIABLE_DECLARATOR">exception</code>&nbsp;<code class="KEYWORD">==</code>&nbsp;<code class="CLASS_DECLARATOR">null</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">if</code>&nbsp;<code class="FUNCTION_IDENTIFIER">(</code><code class="TYPE_IDENTIFIER">!</code><code class="CLASS_DECLARATOR">deleteTargetDirectory</code>&nbsp;<code class="FUNCTION_DECLARATOR">&&</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">targetDirectory</code>&nbsp;<code class="KEYWORD">==</code>&nbsp;<code class="TYPE_IDENTIFIER">dir</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="COMMENT">//&nbsp;Do&nbsp;nothing</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code>&nbsp;<code class="TYPE_IDENTIFIER">else</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">delete</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">dir</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">FileVisitResult</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">CONTINUE</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code>&nbsp;<code class="TYPE_IDENTIFIER">else</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">throw</code>&nbsp;<code class="CLASS_DECLARATOR">exception</code><code class="COMMENT">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
<br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="KEYWORD">static</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">streamToString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">InputStream</code>&nbsp;<code class="CLASS_DECLARATOR">inputStream</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="GENERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">CharStreams</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="FUNCTION_IDENTIFIER">(</code><code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">InputStreamReader</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">inputStream</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">UTF_8</code><code class="FUNCTION_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="FUNCTION_DECLARATOR">downloadUrl</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">url</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="CLASS_DECLARATOR">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">BufferedReader</code>&nbsp;<code class="VARIABLE_DECLARATOR">in</code>&nbsp;<code class="FUNCTION_DECLARATOR">=</code>&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">BufferedReader</code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">InputStreamReader</code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">URL</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">url</code><code class="GENERAL">)</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">openStream</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">CharStreams</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">toString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">in</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">MalformedURLException</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">IllegalArgumentException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Writes&nbsp;a&nbsp;proto&nbsp;to&nbsp;zip&nbsp;archive.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="COMMENT">//&nbsp;TODO:&nbsp;Think&nbsp;over&nbsp;how&nbsp;to&nbsp;instead&nbsp;of&nbsp;writing&nbsp;the&nbsp;file&nbsp;to&nbsp;disk&nbsp;and&nbsp;then&nbsp;copying,&nbsp;and&nbsp;then</code><br />
&nbsp;&nbsp;<code class="COMMENT">//&nbsp;deleting,&nbsp;write&nbsp;it&nbsp;once,&nbsp;directly&nbsp;to&nbsp;the&nbsp;Zip&nbsp;filesystem</code><br />
&nbsp;&nbsp;<code class="LITERAL">public</code>&nbsp;<code class="KEYWORD">void</code>&nbsp;<code class="FUNCTION_DECLARATOR">writePrototxtToZip</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="CLASS_DECLARATOR">proto</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">zipFilePath</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">pathInsideZip</code><code class="FUNCTION_DECLARATOR">)</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="VARIABLE_DECLARATOR">fileContent</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">TextFormat</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">printToUnicodeString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">proto</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">File</code>&nbsp;<code class="VARIABLE_DECLARATOR">tempPrototxt</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">File</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">createTempFile</code><code class="FUNCTION_IDENTIFIER">(</code><code class="CHAR_STRING_LITERAL">"temp_prototxt"</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="KEYWORD">".prototxt"</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">BufferedWriter</code>&nbsp;<code class="VARIABLE_DECLARATOR">writer</code>&nbsp;<code class="FUNCTION_DECLARATOR">=</code>&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">BufferedWriter</code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">FileWriter</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">tempPrototxt</code><code class="VARIABLE_DECLARATOR">)</code><code class="GENERAL">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">writer</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">write</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">fileContent</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">writer</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">close</code><code class="GENERAL">(</code><code class="GENERAL">)</code><code class="KEYWORD">;</code><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Map</code><code class="KEYWORD"><</code><code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code><code class="TYPE_IDENTIFIER">></code>&nbsp;<code class="VARIABLE_DECLARATOR">env</code>&nbsp;<code class="FUNCTION_DECLARATOR">=</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="TYPE_IDENTIFIER">HashMap</code><code class="VARIABLE_DECLARATOR"><</code><code class="FUNCTION_DECLARATOR">></code><code class="FUNCTION_DECLARATOR">(</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">env</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">put</code><code class="FUNCTION_IDENTIFIER">(</code><code class="CHAR_STRING_LITERAL">"create"</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="KEYWORD">"true"</code><code class="VARIABLE_DECLARATOR">)</code><code class="KEYWORD">;</code><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">URI</code>&nbsp;<code class="VARIABLE_DECLARATOR">uri</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">URI</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">create</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">String</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">format</code><code class="GENERAL">(</code><code class="CHAR_STRING_LITERAL">"jar:file:%s"</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="FUNCTION_DECLARATOR">joinPaths</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">zipFilePath</code><code class="VARIABLE_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="COMMENT">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="FUNCTION_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">FileSystem</code>&nbsp;<code class="VARIABLE_DECLARATOR">zipfs</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="TYPE_IDENTIFIER">FileSystems</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">newFileSystem</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">uri</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">env</code><code class="VARIABLE_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">Files</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">copy</code><code class="GENERAL">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">fileSystem</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">tempPrototxt</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="GENERAL">(</code><code class="FIELD_IDENTIFIER">)</code><code class="FIELD_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">,</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">zipfs</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getPath</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">pathInsideZip</code><code class="FUNCTION_DECLARATOR">)</code><code class="TYPE_IDENTIFIER">,</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">StandardCopyOption</code><code class="TYPE_IDENTIFIER">.</code><code class="CLASS_DECLARATOR">REPLACE_EXISTING</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code>&nbsp;<code class="KEYWORD">finally</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">tempPrototxt</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">deleteOnExit</code><code class="FUNCTION_DECLARATOR">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;prototxt&nbsp;file&nbsp;into&nbsp;a&nbsp;proto&nbsp;from&nbsp;zip&nbsp;archive.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxtFromZip</code><code class="KEYWORD">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">zipFilePath</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">pathInsideZip</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="KEYWORD">throws</code>&nbsp;<code class="TYPE_IDENTIFIER">IOException</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">ZipFile</code>&nbsp;<code class="VARIABLE_DECLARATOR">zipFile</code>&nbsp;<code class="FUNCTION_DECLARATOR">=</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">ZipFile</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">joinPaths</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">getCurrentWorkingDirectory</code><code class="FUNCTION_DECLARATOR">(</code><code class="TYPE_IDENTIFIER">)</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">zipFilePath</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="VARIABLE_DECLARATOR">content</code>&nbsp;<code class="KEYWORD">=</code>&nbsp;<code class="FUNCTION_DECLARATOR">streamToString</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">zipFile</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getInputStream</code><code class="GENERAL">(</code><code class="TYPE_IDENTIFIER">zipFile</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">getEntry</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">pathInsideZip</code><code class="VARIABLE_DECLARATOR">)</code><code class="CHAR_STRING_LITERAL">)</code><code class="GENERAL">)</code><code class="KEYWORD">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">TextFormat</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">merge</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">content</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="VARIABLE_DECLARATOR">)</code><code class="COMMENT">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="TYPE_IDENTIFIER">builder</code><code class="KEYWORD">.</code><code class="CLASS_DECLARATOR">build</code><code class="FUNCTION_DECLARATOR">(</code><code class="FUNCTION_IDENTIFIER">)</code><code class="FUNCTION_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="KEYWORD">}</code><br />
<br />
&nbsp;&nbsp;<code class="COMMENT">/**&nbsp;Reads&nbsp;a&nbsp;prototxt&nbsp;file&nbsp;into&nbsp;a&nbsp;proto&nbsp;from&nbsp;zip&nbsp;archive,&nbsp;rethrows&nbsp;exceptions&nbsp;as&nbsp;unchecked.&nbsp;*/</code><br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxtFromZipUnchecked</code><code class="KEYWORD">(</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">zipFilePath</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">pathInsideZip</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="TYPE_IDENTIFIER">Message</code><code class="KEYWORD">.</code><code class="TYPE_IDENTIFIER">Builder</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="TYPE_IDENTIFIER">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="TYPE_IDENTIFIER">try</code>&nbsp;<code class="KEYWORD">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="FUNCTION_DECLARATOR">readPrototxtFromZip</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">zipFilePath</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">pathInsideZip</code><code class="TYPE_IDENTIFIER">,</code>&nbsp;<code class="CLASS_DECLARATOR">builder</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code>&nbsp;<code class="KEYWORD">catch</code>&nbsp;<code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">Exception</code>&nbsp;<code class="CLASS_DECLARATOR">e</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="LITERAL">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="CHAR_STRING_LITERAL">throw</code>&nbsp;<code class="TYPE_IDENTIFIER">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">RuntimeException</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">e</code><code class="VARIABLE_DECLARATOR">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="CLASS_DECLARATOR">}</code><br />
&nbsp;&nbsp;<code class="COMMENT">}</code><br />
<br />
&nbsp;&nbsp;<code class="KEYWORD">public</code>&nbsp;<code class="TYPE_IDENTIFIER">File</code>&nbsp;<code class="FUNCTION_DECLARATOR">getFile</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">String</code>&nbsp;<code class="CLASS_DECLARATOR">path</code><code class="FUNCTION_DECLARATOR">)</code>&nbsp;<code class="TYPE_IDENTIFIER">{</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<code class="KEYWORD">return</code>&nbsp;<code class="KEYWORD">new</code>&nbsp;<code class="FUNCTION_DECLARATOR">File</code><code class="KEYWORD">(</code><code class="FUNCTION_DECLARATOR">expandHomeDirectory</code><code class="KEYWORD">(</code><code class="TYPE_IDENTIFIER">path</code><code class="FUNCTION_DECLARATOR">)</code><code class="FUNCTION_IDENTIFIER">)</code><code class="VARIABLE_DECLARATOR">;</code><br />
&nbsp;&nbsp;<code class="COMMENT">}</code><br />
<code class="COMMENT">}</code><br />
<br />
<code class="TYPE_IDENTIFIER"></code></pre></html>